<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Taller Web I</title>

  <!-- Boostrap core css -->
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>
  <link rel="stylesheet" href="../../../resources/core/css/home.css">
  <!-- custom style -->
  <link rel="stylesheet" th:href="@{/css/main.css}"/>

</head>
<body>
<!-- SI EL USUARIO NO ESTA LOGUEADO HACE ESTO -->
<div th:if="${usuario == null}">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" th:href="@{/home}">UNLAM</a>

    <!-- Colocar el botón a la derecha -->
    <div class="d-flex ms-auto">
      <!-- Botón de registrarse -->
      <a th:href="@{/login}" class="btn btn-lg btn-primary btn-block">Iniciar sesión</a>
      <a th:href="@{/registro}" class="btn btn-lg btn-primary btn-block">Registrarse</a>
    </div>
  </nav>
  <main role="main" class="container">

    <div class="club-container">
      <!-- Bucle para mostrar todos los clubs -->
      <div th:each="club : ${clubs}" class="club-item">
        <!-- AGREGAR UN HIPERVINCULO PASANDOLE EL ID A UN CONTROLLER, ESTE VA A BUSCAR EL CLUB Y VA A TRAER TODOS SUS DATOS -->
        <a th:href="@{/club/{id}(id=${club.id})}" class="club-item">

          <img th:src="@{/images/{imagen}(imagen=${club.imagen})}" alt="Imagen del club">

          <h3 th:text="${club.nombre}">Nombre del club</h3>

          <p th:text="${club.descripcion}">Descripción del club</p>
        </a>

      </div>
    </div>


  </main>
</div>
<!-- SI EL USUARIO TIENE ROL "ADMIN" MUESTRA TODO ESTO -->
<div th:if="${usuario != null}">
<div th:if="${usuario.rol == 'ADMIN'}">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" th:href="@{/home}">UNLAM</a>

    <div class="d-flex ms-auto">
          <h1>Bienvenido ADMIN</h1>
          <a href="login.html" >Cerrar sesión</a>

    </div>
  </nav>

  <div class="club-container">
    <!-- Bucle para mostrar todos los clubs -->
    <table class="table table-striped">
      <thead>
      <tr>
        <th>ID</th>
        <th>Imagen</th>
        <th>Nombre del club</th>
        <th>Descripción</th>
        <th>Género</th>
        <th>Acciones</th>
      </tr>
      </thead>
      <tbody>
      <!-- Bucle para mostrar todos los clubs -->
      <tr th:each="club : ${clubs}">
        <!-- ID del club -->
        <td th:text="${club.id}">1</td>

        <!-- Imagen del club -->
        <td>
          <img th:src="@{/images/{imagen}(imagen=${club.imagen})}" alt="Imagen del club" style="width: 50px; height: 50px;">
        </td>

        <!-- Nombre del club -->
        <td th:text="${club.nombre}">Nombre del club</td>

        <!-- Descripción del club -->
        <td th:text="${club.descripcion}">Descripción del club</td>

        <!-- Género del club -->
        <td th:text="${club.genero}">Género del club</td>

        <!-- Acciones: Reportar y Eliminar -->
        <td>
          <a th:href="@{/club/reportar/{id}(id=${club.id})}" class="btn btn-warning btn-sm">Reportar</a>
          <a th:href="@{/club/eliminar/{id}(id=${club.id})}" class="btn btn-danger btn-sm" onclick="return confirm('¿Estás seguro de que deseas eliminar este club?');">Eliminar</a>
        </td>
      </tr>
      </tbody>
    </table>

    </div>

</div>

<!-- SI EL USUARIO TIENE ROL "USUARIO" MUESTRA TODO ESTO-->
<div th:if="${usuario.rol == 'usuario'}">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" th:href="@{/home}">UNLAM</a>

    <div class="d-flex ms-auto">
      <a th:href="@{/crearClub}" class="btn btn-lg btn-primary btn-block">Crear nuevo club</a>

      <div class="dropdown">
        <button>
          <img th:src="@{/images/menuDesplegable.png}" alt="Menu Desplegable" class="img-fluid" style="max-width: 50px; height: auto;">
        </button>

        <div class="dropdown-content">

          <a th:href="@{/perfil/{id}(id=${usuario.id})}">Perfil</a>
          <a th:href="@{/misClubs/{usuarioId}(usuarioId=${usuario.id})}" >Mis clubs</a>
          <a href="login.html" >Cerrar sesión</a>
        </div>
      </div>
    </div>
  </nav>
  <main role="main" class="container">
    <!--
    <div class = "container">
       USAR ESTO CUANDO ESTE LOGUEADO COMO ADMIN
          <a href="busqueda" class="btn btn-lg btn-primary btn-block">Mostrar todos los usuarios</a>
    </div>
    -->
    <div class="club-container">
      <!-- Bucle para mostrar todos los clubs -->
      <div th:each="club : ${clubs}" class="club-item">
        <!-- AGREGAR UN HIPERVINCULO PASANDOLE EL ID A UN CONTROLLER, ESTE VA A BUSCAR EL CLUB Y VA A TRAER TODOS SUS DATOS -->
        <a th:href="@{/club/{id}(id=${club.id})}" class="club-item">

          <img th:src="@{/images/{imagen}(imagen=${club.imagen})}" alt="Imagen del club">

          <h3 th:text="${club.nombre}">Nombre del club</h3>

          <p th:text="${club.descripcion}">Descripción del club</p>
        </a>

      </div>
    </div>


  </main>
</div>

</body>
</html>